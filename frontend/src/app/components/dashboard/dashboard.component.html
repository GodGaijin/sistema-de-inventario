<div class="dashboard">
  <div class="dashboard-header">
    <h1>Sistema de Inventario</h1>
    <div class="user-info">
      <span>Bienvenido, {{ currentUser()?.username }}</span>
      <button (click)="logout()" class="btn-danger">Cerrar Sesión</button>
    </div>
  </div>

  <!-- Información del Sistema -->
  <div class="system-info" *ngIf="isAdmin() || isSeniorAdmin()">
    <h2>Información del Sistema</h2>
    
    <!-- Usuarios Conectados -->
    <div class="active-users-section">
      <h3>Usuarios Conectados ({{ activeUsersCount }})</h3>
      
      <div class="loading-spinner" *ngIf="loadingActiveUsers">
        <div class="spinner"></div>
        <span>Cargando usuarios activos...</span>
      </div>
      
      <div class="active-users-list" *ngIf="!loadingActiveUsers && activeUsers.length > 0">
        <div class="user-card" *ngFor="let user of activeUsers">
          <div class="user-info">
            <div class="user-name">{{ user.username }}</div>
            <div class="user-role">{{ getRoleDisplayName(user.role) }}</div>
          </div>
          <div class="user-activity">
            <span class="activity-time">{{ formatLastActivity(user.last_activity) }}</span>
          </div>
        </div>
      </div>
      
      <div class="no-active-users" *ngIf="!loadingActiveUsers && activeUsers.length === 0">
        <p>No hay usuarios conectados actualmente.</p>
      </div>
    </div>
  </div>



  <div class="menu-grid">
    <div class="menu-item" (click)="navigateTo('/products')">
      <h3>Productos</h3>
      <p>Gestionar inventario de productos</p>
    </div>

    <div class="menu-item" (click)="navigateTo('/categories')">
      <h3>Categorías</h3>
      <p>Administrar categorías de productos</p>
    </div>

    <div class="menu-item" (click)="navigateTo('/distributors')">
      <h3>Distribuidores</h3>
      <p>Gestionar proveedores y distribuidores</p>
    </div>

    <div class="menu-item" (click)="navigateTo('/commerce-data')">
      <h3>Datos del Comercio</h3>
      <p>Información de la empresa</p>
    </div>

    <div *ngIf="isAdmin()" class="menu-item" (click)="navigateTo('/audits')">
      <h3>Auditoría</h3>
      <p>Registro de actividades del sistema</p>
    </div>

    <div *ngIf="isSeniorAdmin()" class="menu-item admin-senior" (click)="navigateTo('/user-management')">
      <h3>Gestión de Usuarios</h3>
      <p>Administrar roles de usuarios del sistema</p>
      <span class="admin-badge">Admin Senior</span>
    </div>


  </div>
</div> 